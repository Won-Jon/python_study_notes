# Python列表（list）

列表（`list`）是 Python 中最常用的**可变序列**数据类型，它是一个有序的集合，可以存储任意类型的元素（包括元素嵌套），并且支持**动态扩容**。列表提供了许多内置方法，用于**增、删、改、查**等操作。

---

## **一、列表的创建**

列表使用 **方括号 `[]`** 定义，元素之间用 **逗号 `,`** 分隔：

```python
empty_list = []               # 空列表
nums = [1, 2, 3, 4]           # 数字列表
names = ["Alice", "Bob"]      # 字符串列表
mixed = [1, "hello", 3.14]    # 混合类型列表
nested = [[1, 2], [3, 4]]     # 嵌套列表（二维列表）
list_from_range = list(range(10)) # 从 range 转换而来
```

---

## **二、列表的通用操作**

列表是**序列（Sequence）**类型，因此支持所有通用操作（索引、切片、遍历、`len()`、`max/min()` 等）：

```python
nums = [10, 20, 30, 40]
print(nums[0])      # 10（索引）
print(nums[1:3])    # [20, 30]（切片）
print(30 in nums)   # True（成员判断）
print(len(nums))    # 4（长度）
print(max(nums))    # 40（最大）
print(min(nums))    # 10（最小）
```

---

## **三、列表的常用方法**

列表是**可变（Mutable）**的，因此可以**修改原列表**。以下是 Python 列表最常用的方法：

### **1. 增：添加元素**

| 方法                  | 作用                                                                 | 示例                          |
|-----------------------|----------------------------------------------------------------------|-------------------------------|
| **`append(x)`**       | 在列表**末尾**追加一个元素 `x`，**不影响原列表**                     | `nums.append(50)` → `[10, 20, 30, 40, 50]` |
| **`insert(i, x)`**    | 在**指定索引 `i` 处插入元素 `x`**                                    | `nums.insert(1, 15)` → `[10, 15, 20, 30, 40]` |
| **`extend(iterable)`**| 直接将另一个**可迭代对象（如 `list`、`tuple`）拼接到列表末尾**       | `nums.extend([50, 60])` → `[10, 20, 30, 40, 50, 60]` |
| `+` **连接**          | 合并两个列表（**生成新列表**，不影响原列表）                         | `nums + [50, 60]` → `[10, 20, 30, 40, 50, 60]` |

**示例：**

```python
nums = [10, 20, 30, 40]
nums.append(50)       # [10, 20, 30, 40, 50]
nums.insert(1, 15)    # [10, 15, 20, 30, 40, 50]
nums.extend([60, 70]) # [10, 15, 20, 30, 40, 50, 60, 70]
new_nums = nums + [80]  # [10, 15, 20, 30, 40, 50, 60, 70, 80]（新列表）
```

---

### **2. 删：移除元素**

| 方法                  | 作用                                                                 | 示例                          |
|-----------------------|----------------------------------------------------------------------|-------------------------------|
| **`remove(x)`**       | 删除**第一个**匹配的元素 `x`，如果没有会报错 `ValueError`            | `["a", "b", "a"].remove("a")` → `["b", "a"]` |
| **`pop([i])`**        | **移除并返回**索引 `i` 处的元素（默认移除最后一个元素）               | `nums.pop(0)` 移除第 1 个元素并返回 `10` |
| **`clear()`**         | **清空列表**，只剩一个空列表 `[]`                                    | `nums.clear()` → `[]` |
| **`del`** 语句        | **删除指定索引或切片**的元素（适用于列表、切片）                     | `del nums[1]` 或 `del nums[1:3]` |
| **`*=` 清空 & 重建**  | `nums *= 0` 相当于 `nums.clear()`，但会**重新创建列表对象**           | `nums *= 0` → `[]` |

**示例：**

```python
nums = [10, 20, 30, 40]
nums.remove(20)     # [10, 30, 40]
val = nums.pop(1)   # val=30, nums=[10, 40]
nums.clear()        # []
del nums[0]         # 删除索引 0 的元素
nums *= 0           # 等效于 nums.clear()
```

---

### **3. 改：修改元素**

| 方法              | 作用                            | 示例                          |
|-------------------|---------------------------------|-------------------------------|
| **`list[i] = x`** | 替换索引 `i` 处的元素           | `nums[1] = 99` → `[10, 99, 30]` |
| **`list[i:j] = new_list`** | 切片替换 | `nums[1:3] = [22, 33]` `new_list`没必要和替换的列表大小一致 |
| **`reverse()`**   | **原地反转**列表，无返回值       | `nums.reverse()` → `[40, 30, 20, 10]` |
| **`sort([key, reverse])`** | **原地排序**（默认升序） | `nums.sort(reverse=True)` 降序 |

**示例：**

```python
nums = [10, 20, 30, 40]
nums[1] = 99         # [10, 99, 30, 40]
nums[1:3] = [22, 33] # [10, 22, 33, 40]
nums.reverse()       # [40, 33, 22, 10]
nums.sort()          # [10, 22, 33, 40]
nums.sort(reverse=True) # [40, 33, 22, 10]
```

---

### **4. 查：查找信息**

| 方法              | 作用                                                                 | 示例                          |
|-------------------|----------------------------------------------------------------------|-------------------------------|
| **`index(x, [start, end])`** | 在`[start,end]`查找 `x` 的相对于原列表**索引**（若不存在则报错 `ValueError`） | `nums.index(20)` → `1` |
| **`count(x)`**    | 返回 `x` **出现的次数**                                            | `[1, 2, 2, 3].count(2)` → `2` |
| **`copy()`**      | **浅拷贝**当前的列表（适用于可变对象）                              | `new_nums = nums.copy()` |

**示例：**

```python
nums = [10, 20, 30, 20]
print(nums.index(20))  # 1（第一次出现的索引）
print(nums.count(20))  # 2
new_nums = nums.copy() # 浅拷贝（不影响原列表）
```

---

## **四、高级用法**

### **1. 列表推导式（List Comprehension）**

```python
squares = [x ** 2 for x in range(5)]  # [0, 1, 4, 9, 16]
even_nums = [x for x in nums if x % 2 == 0]  # 筛选偶数
```

### **2. 列表反转（`[::-1]` vs `reverse()`）**

```python
nums = [1, 2, 3]
reversed_nums = nums[::-1]  # [3, 2, 1]（生成新列表）
nums.reverse()  # [3, 2, 1]（修改原列表）
```

### **3. 列表的深拷贝 vs 浅拷贝**

```python
import copy
a = [[1, 2], [3, 4]]
b = a.copy()          # 浅拷贝（嵌套列表会共享引用）
c = copy.deepcopy(a)  # 深拷贝（完全独立）
```

---

## **五、总结**

| **分类**   | **核心方法**              | **返回值** |
|------------|---------------------------|------------|
| **增**     | `append(x)`, `insert(i, x)`, `extend(iterable)` | 无 |
| **删**     | `remove(x)`, `pop(i)`, `clear()`, `del` | `pop()` 返回元素 |
| **改**     | `list[i] = x`, `reverse()`, `sort()` | 无 |
| **查**     | `index(x)`, `count(x)`, `copy()` | 索引、计数、新列表 |

💡 **最佳实践：**

- 多用 **列表推导式**，更 **Pythonic**。
- **修改列表时，优先用 `+=` 拼接而非 `+`**，因为 `+=` 是原地操作，内存效率更高。
- 对大列表执行 **`remove()` 操作要考虑时间复杂度（`O(n)`）**，可以用 `filter()` 或列表推导式优化。

🚀 **现在你已经掌握了 Python 列表的所有核心方法！快去实践吧~** 💻
