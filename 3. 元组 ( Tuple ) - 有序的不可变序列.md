# Python元组(tuple)详解

元组(tuple)是Python中一个非常重要的不可变序列数据类型，和列表(list)相似但有关键的区别。

## 元组的基本特性

1. **不可变性(Immutable)**：创建后不能修改其内容
2. **有序性**：元素按插入顺序存储，可以通过索引访问
3. **可以包含任意类型**：和列表一样可以包含不同类型的数据
4. **使用圆括号**：通常用`()`表示，但括号不是必须的
5. **内存效率更高**：比列表占用的空间更小

## 创建元组

```python
# 1. 使用圆括号
t1 = (1, 2, 3)

# 2. 不使用括号 (仅当元组可作为单独表达式时)
t2 = 1, 2, 3

# 3. 创建单元素元组 (必须加逗号)
t3 = (4,)       # 这是元组
not_a_tuple = (4)  # 这不是元组，只是一个数字

# 4. 空元组
empty_tuple = ()

# 5. 使用tuple()构造函数
t4 = tuple([1, 2, 3])  # 从列表转换
t5 = tuple("abc")      # ('a', 'b', 'c')
```

## 元组的操作

虽然元组不可变，但支持多种操作：

```python
# 访问元素
t = (1, 'a', 3.14)
print(t[0])     # 输出: 1
print(t[-1])    # 输出: 3.14

# 切片操作
print(t[1:])    # 输出: ('a', 3.14)

# 检查成员
print('a' in t) # 输出: True

# 连接元组
t1 = (1, 2)
t2 = ('a', 'b')
print(t1 + t2)  # 输出: (1, 2, 'a', 'b')

# 重复元组
print(t1 * 3)   # 输出: (1, 2, 1, 2, 1, 2)

# 元组拆包(unpacking)
x, y, z = (1, 'a', 3.14)
print(y)        # 输出: 'a'

# 交换变量值
a, b = 1, 2
a, b = b, a     # 交换a和b的值
```

## 元组的不可变性

```python
t = (1, 2, 3)
t[0] = 5  # 会抛出TypeError: 'tuple' object does not support item assignment
```

但如果元组包含可变对象(如列表)，可以修改这些可变对象：

```python
t = (1, [2, 3], 4)
t[1].append(5)  # 合法，现在t是 (1, [2, 3, 5], 4)
```

## 元组与列表的区别

| 特性        | 元组(tuple)                     | 列表(list)                    |
|------------|--------------------------------|-------------------------------|
| **可变性**  | 不可变                         | 可变                          |
| **语法**    | 通常使用圆括号 `()`            | 使用方括号 `[]`               |
| **性能**    | 通常更快，占用内存更少         | 稍慢，占用内存更多            |
| **方法**    | 只有count()和index()方法       | 有append(), remove()等方法    |
| **用途**    | 用于不应改变的数据集合         | 用于需要频繁修改的数据集合     |

## 元组的常见用途

1. **作为不可变的记录**：

   ```python
   person = ('Alice', 25, 'Developer')
   name, age, job = person
   ```

2. **作为字典的键**(因为字典键必须是不可变的)：

   ```python
   locations = {
       (35.6895, 39.6917): "Tokyo",
       (40.7128, 74.0060): "New York"
   }
   ```

3. **函数返回多个值**：

   ```python
   def get_stats(data):
       return min(data), max(data), sum(data)/len(data)
   ```

4. **保护数据不被修改**：

   ```python
   CONSTANTS = (3.14, 2.718, 1.618)
   ```

5. **作为函数的参数和返回值**：

   ```python
   def process_data(data):
       # 处理数据...
       return (result1, result2, result3)
   ```

在Python中，`t[-1]` 之所以输出 `3.14`，是因为 **负数索引** 在列表（list）和元组（tuple）中表示 **从末尾开始倒数访问元素**。

## 支持负索引

### 1. **负索引的含义**

- Python 支持正索引（从 0 开始，从左到右）和 **负索引（从 -1 开始，从右到左）**
- `-1` 表示 **最后一个元素**
- `-2` 表示 **倒数第二个元素**
- 依此类推，直到 `-n`（第一个元素）。

### 2. **示例解析**

   假设你有这样一个元组：

   ```python
   t = (1, 'a', 3.14)
   ```

   | 正向索引 | 0   | 1   | 2     |
   |---------|-----|-----|------|
   | 元素     | 1   | 'a' | 3.14 |
   | **负向索引** | **-3** | **-2** | **-1** |

- `t[0]` -> `1` **(第一个元素)**
- `t[1]` -> `'a'` **(第二个元素)**
- `t[2]` -> `3.14` **(第三个元素)**
- `t[-1]` -> `3.14` **(从右往左数第1个元素 = 最后一个元素)**
- `t[-2]` -> `'a'`   **(从右往左数第2个元素 = 倒数第二个)**
- `t[-3]` -> `1`     **(从右往左数第3个元素 = 第一个元素)**

### 3. **适用范围**

- **任何可索引（indexable）的序列类型** 都支持负索引，包括 `list`（列表）、`tuple`（元组）、`str`（字符串）。
- **不支持负索引的：`dict`（字典）、`set`（集合）等无序类型。**

### 4. **边界情况**

- `t[-4]` 会报错（超出范围），因为 `t` 只有 3 个元素。
- 但 `t[-3]`（倒数第三个元素，即 `t[0]`）是合法的。
