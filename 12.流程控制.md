# 流程控制

## 1. 顺序结构（Sequential Structure）

* 这是最基础的结构。程序从上到下，依次执行每一行代码。
* 如果没有其他的控制语句（如条件判断或循环），代码会按照它们在文件中的排列顺序执行。

   ```python
   a = 10
   b = 20
   c = a + b  # 先执行这行
   print(c)   # 然后执行这行 (输出 30)
   ```

## 2. 分支结构（Selection/Conditional Structure）

* 分支结构允许程序根据不同的条件执行不同的代码块。Python 中主要使用 `if`, `elif` (else if), 和 `else` 语句来实现分支结构。

### 2.1基本语法

```python
if condition:
    # 满足条件时执行的代码块
elif: another_condition:

else:
```

> 1. `elif` 和 `else` 语句都是可选的。
> 2. `condition` 可以是任何返回布尔值（`True` 或 `False`）的表达式。
> 3. 以下值会被视为 `False`：
>    * 布尔值`False`
>    * 空值`None`
>    * `0` (所有数值类型的零，如 `0`, `0.0`, `0j`)
>    * 空序列（如 `''`, `[]`, `()`, `{}`）
>    * 空映射（如 `{}`）
>    * 所有其他值都被视为 `True`。

### 2.2 if 语句

判断一个条件是否为真。如果条件为真，执行 `if` 块中的代码

```python
x = 5
if x > 0:
    print("x 是正数")
```

### 2.3 if-else 语句

提供两种选择。如果 `if` 的条件为真，执行 `if` 块中的代码；否则，执行 `else` 块中的代码

```python
x = -2
if x > 0:
    print("x 是正数")
else:
    print("x 是负数或零")
```

### 2.4 if-elif-else 语句

提供多个选择。 依次判断 `if` 和 `elif` 的条件，执行第一个条件为真的代码块。如果所有条件都不为真，执行 `else` 块中的代码（如果存在）

```python
score = 85
if score >= 90:
    print("优秀")
elif score >= 80:
    print("良好")
elif score >= 70:
    print("中等")
elif score >= 60:
    print("及格")
else:
    print("不及格")
```

### 2.6 嵌套 `if` 语句

可以在 `if` 块、`elif` 块或 `else` 块内部嵌套其他的 `if` 语句，创建更复杂的分支逻辑

```python
x = 10
y = 5
if x > 0:
    if y > 0:
        print("x 和 y 都是正数")
    else:
        print("x 是正数，但 y 不是正数")
else:
    print("x 不是正数")
```

### 2.7 三目运算符（条件表达式或条件运算符）

好的，我来详细解释一下 Python 中的三目运算符（也称为条件表达式或条件运算符）。
三目运算符是一种简洁的语法，用于在一行代码中根据条件选择不同的值。 它本质上是 `if-else` 语句的简化形式。

**语法：**

```python
value_if_true if condition else value_if_false
```

**解释：**

1. `condition`：一个布尔表达式，它的结果是 `True` 或 `False`。
2. `value_if_true`：如果 `condition` 为 `True`，则表达式的结果为该值。
3. `value_if_false`：如果 `condition` 为 `False`，则表达式的结果为该值。

**工作流程：**

1. 先计算 `condition` 的值。
2. 如果 `condition` 为 `True`，则表达式返回 `value_if_true`。
3. 如果 `condition` 为 `False`，则表达式返回 `value_if_false`。

**示例：**

```python
age = 20
status = "成年人" if age >= 18 else "未成年人"
print(status)  # 输出：成年人

x = 5
y = 10
max_value = x if x > y else y
print(max_value)  # 输出：10
```

**等价于 if-else 语句：**

上面的例子可以等价地写成：

```python
age = 20
if age >= 18:
    status = "成年人"
else:
    status = "未成年人"
print(status)

x = 5
y = 10
if x > y:
    max_value = x
else:
    max_value = y
print(max_value)
```

**使用场景：**

1. **简化赋值语句：** 根据条件给变量赋值。

    ```python
    is_even = True if number % 2 == 0 else False
    ```

2. **返回值：** 在函数中根据条件返回不同的值。

    ```python
    def get_status(age):
        return "成年人" if age >= 18 else "未成年人"
    ```

3. **表达式内部：** 可以在更复杂的表达式中使用。

    ```python
    print("年龄是否大于 18: " + ("是" if age >= 18 else "否"))
    ```

**注意事项：**

1. **可读性：** 尽管三目运算符可以使代码更简洁，但过度使用可能会降低代码的可读性。  只在简单的情况下使用，复杂的逻辑应该使用 `if-else` 语句。

2. **避免嵌套：** 尽量避免嵌套三目运算符，因为这会使代码难以理解。

    ```python
    # 不建议这样写
    result = "A" if score >= 90 else "B" if score >= 80 else "C" if score >= 70 else "D"
    ```

    上面的代码更易读的写法是使用 `if-elif-else` 语句：

    ```python
    if score >= 90:
        result = "A"
    elif score >= 80:
        result = "B"
    elif score >= 70:
        result = "C"
    else:
        result = "D"
    ```

3. **限制：** 三目运算符只能用于简单的条件判断和值的选择，不能包含复杂的语句或循环。

* **注意点:**
  * Python 使用缩进（通常是四个空格）来表示代码块的范围。 这一点非常重要，缩进错误会导致语法错误。
  * 每个 `if`, `elif`, 和 `else` 语句的末尾都必须有一个冒号 (`:`)。没有 `else if` 这种语法
  * Python 允许链式比较，使代码更简洁。例如 `x > 5 > 3` 等价于 `x > 5 and 5 > 3`
  * 在 Python 3.10 之后，引入了 `match-case` 语句 (结构化模式匹配)，提供了一种更简洁的方式来处理多个条件。

## 3. 循环结构（Looping Structure）

* 循环结构允许程序重复执行一段代码，直到满足特定条件。 Python 中主要使用 `for` 和 `while` 语句来实现循环结构。

### 3.1 for 循环

用于遍历一个序列（例如，列表、元组、字符串、集合、字典）或其他可迭代对象。

```python
for item in iterable:
    # 循环体
else:  # 可选
    # 循环正常结束时执行的代码块 (没有被 break 中断)
```

* `iterable` 可以是：
  * 列表 (`list`)
  * 元组 (`tuple`)
  * 字符串 (`str`)
  * 集合 (`set`)
  * 字典 (`dict`) (遍历键)
  * `range()` 对象
  * 任何实现了迭代器协议的对象

```python
# 遍历列表
my_list = [1, 2, 3, 4, 5]
for item in my_list:
print(item)

# 遍历字符串
my_string = "Hello"
for char in my_string:
print(char)

# 使用 range() 函数生成一个数字序列
for i in range(5):  # range(5) 生成 0, 1, 2, 3, 4
print(i)

# 带起始值和步长的 range()
for i in range(2, 10, 2): # 从 2 开始，到 10 之前结束，步长为 2  (2, 4, 6, 8)
print(i)

# 遍历字典的 key
my_dict = {"a": 1, "b": 2, "c": 3}
for key in my_dict:
print(key, my_dict[key]) # 输出 key 和 value

# 遍历字典的 (key, value) 对
for key, value in my_dict.items():
print(key, value)
```

```python
for i in range(10): 
    print(i)
    i = 10 # i 是循环变量,每一次迭代都会重新赋值
```

### 3.2 while 循环

只要条件为真，就一直执行循环体中的代码。

```python
count = 0
while count < 5:
    print(count)
    count += 1  # 确保循环最终会结束，否则会导致无限循环

# 使用 while 循环模拟 for 循环
my_list = [1, 2, 3]
index = 0
while index < len(my_list):
    print(my_list[index])
    index += 1
```

### 3.3 break 语句

用于立即退出循环。 通常在循环内部与 `if` 语句一起使用，当满足特定条件时跳出循环。

```python
for i in range(10):
    if i == 5:
        break  # 当 i 等于 5 时，退出循环
    print(i) # 输出 0, 1, 2, 3, 4
```

### 3.4 continue 语句

用于跳过当前循环迭代的剩余代码，直接进入下一次迭代。

```python
for i in range(10):
    if i % 2 == 0:
        continue  # 当 i 是偶数时，跳过本次迭代的剩余代码
    print(i) # 输出 1, 3, 5, 7, 9
```

> **`range()` 函数：** `range(start, stop, step)` 生成一个从 `start` 开始（包含），到 `stop` 结束（不包含），步长为 `step` 的整数序列。

### 3.5 else 语句 (循环中的)

`for` 和 `while` 循环都可以有一个可选的 `else` 子句。  `else` 块中的代码会在循环正常结束时（即，不是通过 `break` 语句退出）执行。

```python
for i in range(5):
    print(i)
else:
    print("循环正常结束")

i = 0
while i < 5:
    print(i)
    i += 1
else:
    print("循环正常结束")

# 使用 break 语句阻止 else 块执行
for i in range(5):
if i == 3:
    break
print(i)
else:
    print("这一行不会被执行，因为循环被 break 语句中断了")
```

**总结:**

* **顺序结构:**  按代码顺序执行。
* **分支结构 (if, elif, else):**  根据条件选择执行不同的代码块。
* **循环结构 (for, while):**  重复执行代码块，`break` 用于退出循环， `continue` 用于跳过当前迭代。 `else` 在循环正常结束时执行。

## 4. 其他控制流工具

* **`pass` 语句：**

    `pass` 的主要作用是作为占位符，用于在语法上需要一条语句，但逻辑上不需要执行任何操作的场景。它可以避免因为缺少语句而导致的语法错误。

    1. **空的函数或方法体：**

          当定义一个函数或方法，但暂时还没有想好具体实现时，可以使用 `pass` 来避免语法错误。在这前后的代码会正常运行

          ```python
          def my_function():
              pass  # 稍后实现
          ```

          如果函数体是空的，Python 会抛出 `IndentationError`，而 `pass` 可以避免这个错误。

    2. **空的类定义：**

          类似于函数，你可能需要先声明一个类，但稍后再实现其具体内容。

          ```python
          class MyClass:
              pass  # 稍后添加属性和方法
          ```

    3. **`if`、`elif` 或 `else` 块：**

          在某些情况下，你可能只想在满足某些条件时什么也不做。

          ```python
          x = 10
          if x > 5:
              pass  # 如果 x 大于 5，什么也不做
          else:
              print("x 小于等于 5")
          ```

    4. **循环体：**

          当你需要循环遍历一个序列，但不想在循环体中执行任何操作时，可以使用 `pass`。

          ```python
          for i in range(10):
              pass  # 暂时不做任何处理
          ```

    5. **异常处理：**

          有时你可能需要捕获一个异常，但不做任何处理，只是为了防止程序崩溃。

          ```python
          try:
              # 可能会引发异常的代码
              result = 10 / 0
          except ZeroDivisionError:
              pass  # 忽略 ZeroDivisionError 异常
          ```

    6. **与其他语句的比较：**

        **`continue` 与 `pass` 的区别：**

        * `pass` 什么也不做，直接结束当前语句块。
        * `continue` 跳过当前循环迭代的剩余代码，进入下一次迭代。

        ```python
        # 使用 pass
        for i in range(5):
            if i == 2:
                pass # 当 i 为 2 时，什么也不做，继续执行循环
            print(i)  # 输出 0, 1, 2, 3, 4

        # 使用 continue
        for i in range(5):
            if i == 2:
                continue # 当 i 为 2 时，跳过本次迭代的剩余代码，进入下一次迭代
            print(i)  # 输出 0, 1, 3, 4
        ```

    7. **`return` 与 `pass` 的区别：**
       * `return` 用于从函数中返回值（即使返回 `None`），并结束函数的执行。
       * `pass` 只是一个占位符，不返回值，也不结束函数的执行。

    > **代码可读性：** 尽量使用 `pass` 在暂时不需要实现的代码块中，并添加注释说明，以便后续开发人员理解。
    > **避免滥用：** 不要过度使用 `pass`。 只有在确实需要占位符的情况下才使用它。
    > **临时占位符：** 当你使用 `pass` 作为占位符时，记得在后续开发中替换成实际的代码逻辑。

* **函数：**

  * 函数可以将代码块组织成可重用的单元。
  * 通过函数调用实现间接的流程控制。

* **异常处理 (try, except, finally)：**

  * 用于处理程序运行时可能出现的错误。
  * 通过捕获和处理异常，可以控制程序的执行流程。

    ```python
    try:
        # 可能会引发异常的代码
        result = 10 / 0
    except ZeroDivisionError:
        print("除数不能为零")
    finally:
        print("无论是否发生异常，都会执行此代码")
    ```

## 注意事项

* **缩进:**  Python 使用缩进来定义代码块的范围。请始终保持一致的缩进（通常是四个空格）。混合使用空格和制表符会导致错误。
* **循环条件:**  确保 `while` 循环的条件最终会变为假，以避免无限循环。
* **代码可读性:**  使用有意义的变量名和注释来提高代码的可读性。
* **避免深度嵌套:** 过多的嵌套 `if` 语句或循环会降低代码的可读性和维护性。  考虑使用函数或更高级的设计模式来简化复杂逻辑。
* **`match-case` (Python 3.10+):**  当处理多个条件时，考虑使用 `match-case` 语句，它可以使代码更简洁易懂。
* **性能:** 在循环中避免进行不必要的计算或操作，这会影响性能。
